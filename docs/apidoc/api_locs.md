# Запросы к базе локаций

----
[Описание системы](../index.md) ➞ [Документация API](index.md) ➞ Запросы к базе локаций

----

## База локаций

База локаций представляет собой набор карточек данных о локациях. Модель этой структуры данных описана в сведениях о [карточке локации](../datadoc/location_card.md).

----

## Методы API

*Графа "ответ" в таблицах ниже не упоминает возврат кода состояния HTTP.*
*Знак вопроса после имени параметра означает, что данный параметр необязателен для осуществления запроса.*
<br/><br/>

### Запрос данных о локации

**Доступ:** требуется аутентификация.

|	Адрес метода				|	Тип запроса			|	Параметры			| Ответ
|	:----:						|	:----:				|	:----:				| :----:
| **/api/locations/get**		|	GET					| id					| JSON:<br/>location data

**Значения параметров:**
* `id` : уникальный ID локации.

Метод возвращает `location data` - набор данных о локации по запрошенному ID. Эти данные содержат значения полей, описанных в [карточке локации](../datadoc/location_card.md) и помеченных как выходные *(Out)*. Текущий метод возвращает все возможные данные о локации.
<br/><br/>

### Запрос списка локаций

**Доступ:** требуется аутентификация.

|	Адрес метода				|	Тип запроса			|	Параметры			| Ответ
|	:----:						|	:----:				|	:----:				| :----:
| **/api/locations/list**		|	GET					| count?<br/>from?		| JSON:<br/>locations list

**Значения параметров:**
* `count` : количество локаций, которые вернёт запрос;
* `from` : начиная с какой по счёту локации запрос вернёт список *(счёт определяется реальным размером получаемого списка, а не значением ID локации)*.

Метод вернёт список `count` локаций и/или начиная с `from`-ой, если соответствующие параметры указаны. В противном случае вернёт список всех локаций.

Возвращаемые данные - `locations list` - содержат значения полей `Id` и `Name` каждой локации.
<br/><br/>

### Поиск локации по названию

**Доступ:** требуется аутентификация.

|	Адрес метода				|	Тип запроса			|	Параметры			| Ответ
|	:----:						|	:----:				|	:----:				| :----:
| **/api/locations/find**		|	GET					| name					| JSON:<br/>locations list

**Значения параметров:**
* `name` : искомая часть названия локации.

Метод вернёт список всех локаций, названия которых содержат указываемую при запросе искомую подстроку `name`.

Возвращаемые данные - `locations list` - содержат значения полей `Id` и `Name` каждой локации.
<br/><br/>

### Добавление новой локации

**Доступ:** для редакторов.

|	Адрес метода				|	Тип запроса			|	Параметры			| Ответ
|	:----:						|	:----:				|	:----:				| :----:
| **/api/locations/add**		|	POST				| location_data			| —

**Значения параметров:**
* `location_data` : значения полей, описанных в [карточке локации](../datadoc/location_card.md) и помеченных как входные *(In)*.

Для успешного добавления локации должны быть указаны все обязательные поля.
<br/><br/>

### Изменение данных локации

**Доступ:** для редакторов.

|	Адрес метода				|	Тип запроса			|	Параметры			| Ответ
|	:----:						|	:----:				|	:----:				| :----:
| **/api/locations/change**		|	POST				| location_data			| —

**Значения параметров:**
* `location_data` : значения полей, описанных в [карточке локации](../datadoc/location_card.md) и помеченных как входные *(In)*, а также значение поля `Id` локации, для которой осуществляется запрос изменения данных.

Для успешного изменения данных локации требуется указать корректный ID изменяемой локации и корректные значения данных изменяемых полей. Изменены могут быть любые из доступных к изменению (помеченных как входные в [карточке локации](../datadoc/location_card.md)) полей.
<br/><br/>

### Удаление локации

**Доступ:** для редакторов.

|	Адрес метода				|	Тип запроса			|	Параметры			| Ответ
|	:----:						|	:----:				|	:----:				| :----:
| **/api/locations/remove**		|	GET					| id					| —

**Значения параметров:**
* `id` : уникальный ID локации.

Для успешного удаления требуется указать корректный ID удаляемой локации.
<br/><br/>

### Запрос списка отсортированных локаций

**Доступ:** требуется аутентификация.

|	Адрес метода				|	Тип запроса			|	Параметры			| Ответ
|	:----:						|	:----:				|	:----:				| :----:
| **/api/locations/sortedlist**	|	GET					| count?<br/>from?		| JSON:<br/>locations list

**Значения параметров:**
* `count` : количество локаций, которые вернёт запрос;
* `from` : начиная с какой по счёту локации запрос вернёт список *(счёт определяется реальным размером получаемого списка, а не значением ID локации)*.

Метод вернёт список `count` локаций и/или начиная с `from`-ой, если соответствующие параметры указаны. В противном случае вернёт список всех локаций.

Список локаций будет отсортирован по названию в алфавитном порядке *(сортировка осуществляется до применения параметров запроса: отбор количества и начальной для результата локации происходит уже на отсортированном списке)*.

Возвращаемые данные - `locations list` - содержат значения полей `Id` и `Name` каждой локации.
<br/><br/>

### Запрос списка подлокаций

**Доступ:** требуется аутентификация.

|	Адрес метода					|	Тип запроса			|	Параметры			| Ответ
|	:----:							|	:----:				|	:----:				| :----:
| **/api/locations/sublocations**	|	GET					| id					| JSON:<br/>locations list

**Значения параметров:**
* `id` : уникальный ID локации.

Метод вернёт список всех подлокаций указанной - то есть локаций, для которых локация с ID, переданным в запросе, является «родительской».

Возвращаемые данные - `locations list` - содержат значения полей `Id` и `Name` каждой локации.
<br/><br/>

### Запрос списка корневых локаций

**Доступ:** требуется аутентификация.

|	Адрес метода					|	Тип запроса			|	Параметры			| Ответ
|	:----:							|	:----:				|	:----:				| :----:
| **/api/locations/rootlocations**	|	GET					| —						| JSON:<br/>locations list

Метод вернёт список всех корневых локаций - то есть тех, которые не являются подлокациями (у них нет «родительских» локаций).

Возвращаемые данные - `locations list` - содержат значения полей `Id` и `Name` каждой локации.
<br/><br/>
